# üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ—à–∏–≤–∫–∞ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ ESP32, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º:

## ‚úÖ –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. **–£–¥–∞–ª—ë–Ω —Ä–µ–∂–∏–º Access Point** - –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ Station (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–æ–º–∞—à–Ω–µ–π WiFi)
2. **–£–ø—Ä–æ—â—ë–Ω –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤** - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–≥–¥–∞ `DEBUG_MODE = false`
3. **–£–±—Ä–∞–Ω fallback** - –Ω–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É AP –∏ STA

## üéõÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –û—Ç–∫–ª—é—á–∏—Ç—å BLE (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–æ–ª—å–∫–æ WiFi)

–í `vibemon_esp32_advanced.ino` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ BLE –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```cpp
// #include <BLEDevice.h>
// #include <BLEServer.h>
// #include <BLEUtils.h>
// #include <BLE2902.h>
```

–ò –≤ `wifi_config.h`:
```cpp
#define WIFI_MODE_ENABLED true  // –í—Å–µ–≥–¥–∞ WiFi
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~100 KB

### 2. –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä FFT

–í `vibemon_esp32_advanced.ino`:

```cpp
#define SAMPLES 128  // –í–º–µ—Å—Ç–æ 256
```

‚ö†Ô∏è –≠—Ç–æ —Å–Ω–∏–∑–∏—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å 4 –ì—Ü –¥–æ 8 –ì—Ü.

**–≠–∫–æ–Ω–æ–º–∏—è:** ~50 KB

### 3. –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏

```cpp
#define DEBUG_MODE false  // –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~10 KB

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞

–í Arduino IDE:
- **Tools ‚Üí Optimize ‚Üí Optimize for Size (-Os)**

**–≠–∫–æ–Ω–æ–º–∏—è:** ~50-100 KB

### 5. –û—Ç–∫–ª—é—á–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

–ù–∞–π–¥–∏—Ç–µ –≤ –∫–æ–¥–µ (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 450):

```cpp
if (!mpuAvailable) {
  // –°–∏–º—É–ª—è—Ü–∏—è –≤–∏–±—Ä–∞—Ü–∏–∏
  // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –±–ª–æ–∫
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~5 KB

## üìä –¢–∞–±–ª–∏—Ü–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

| –ú–µ—Ç–æ–¥ | –≠–∫–æ–Ω–æ–º–∏—è | –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç |
|-------|----------|-----------------|
| –£–¥–∞–ª–∏—Ç—å AP —Ä–µ–∂–∏–º | ‚úÖ 80 KB | –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ |
| –û—Ç–∫–ª—é—á–∏—Ç—å BLE | 100 KB | –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bluetooth |
| SAMPLES 128 | 50 KB | –•—É–∂–µ —á–∞—Å—Ç–æ—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ |
| Optimize -Os | 50-100 KB | –ù–µ—Ç |
| DEBUG_MODE false | ‚úÖ 10 KB | –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ |
| –£–±—Ä–∞—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é | 5 KB | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ MPU6050 |

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–π ESP32

```cpp
// wifi_config.h
#define WIFI_MODE_ENABLED true

// vibemon_esp32_advanced.ino
#define DEBUG_MODE false
#define SAMPLES 128

// Arduino IDE
Tools ‚Üí Optimize ‚Üí Size (-Os)
```

**–ò—Ç–æ–≥–æ —ç–∫–æ–Ω–æ–º–∏—è:** ~240 KB

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ Arduino IDE —Å–º–æ—Ç—Ä–∏—Ç–µ:

```
Sketch uses XXXXX bytes (XX%) of program storage space.
Global variables use XXXXX bytes (XX%) of dynamic memory.
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- **Program:** < 90% (–∏–Ω–∞—á–µ –Ω–µ –≤–ª–µ–∑–µ—Ç)
- **Memory:** < 80% (–∏–Ω–∞—á–µ –±—É–¥–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ)

## ‚ö†Ô∏è –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –≤–ª–µ–∑–∞–µ—Ç

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é partition scheme:

Arduino IDE:
**Tools ‚Üí Partition Scheme ‚Üí No OTA (2MB APP / 2MB SPIFFS)**

–≠—Ç–æ –¥–∞—Å—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.
